(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/applicationKeyUser/applicationKeyUser"],{"06e6":function(e,t,o){"use strict";var n,i=function(){var e=this,t=e.$createElement;e._self._c},a=[];o.d(t,"b",function(){return i}),o.d(t,"c",function(){return a}),o.d(t,"a",function(){return n})},"108e":function(e,t,o){"use strict";o.r(t);var n=o("dd2e"),i=o.n(n);for(var a in n)"default"!==a&&function(e){o.d(t,e,function(){return n[e]})}(a);t["default"]=i.a},"4e45":function(e,t,o){},"8ca9":function(e,t,o){"use strict";o.r(t);var n=o("06e6"),i=o("108e");for(var a in i)"default"!==a&&function(e){o.d(t,e,function(){return i[e]})}(a);o("ed61");var s,c=o("f0c5"),l=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=l.exports},b3b8:function(e,t,o){"use strict";(function(e){o("b6a3"),o("921b");n(o("66fd"));var t=n(o("8ca9"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},dd2e:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o("8d2a"),i=n.util,a=n.factory,s=n.constant,c={data:function(){return{locations:[],communityId:"",showTypeCd:!1,typeCdList:["业主","家庭成员","租客"],typeCdName:"业主",sexList:["男","女"],showSex:!1,showExpiry:!1,expiryList:["一个月","半年","一年"],photoList:[],name:"",age:null,sex:"男",typeCd:"10004",idCard:"",startTime:null,endTime:null,tel:"",photos:[],msgCode:"",expiry:""}},components:{},props:{},onLoad:function(e){var t=this;n.getOwner(function(e){t.name=e.appUserName,t.idCard=e.idCard,t.tel=e.link}),this.locations=JSON.parse(e.locations),this.communityId=e.communityId},onReady:function(){},onShow:function(){var e=i.date.formatTime(new Date);this.startTime=e},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{bindInput:function(t){console.log(e("数据监听",t," at pages\\applicationKeyUser\\applicationKeyUser.vue:147"));var o=this,n=t.currentTarget.dataset,i=t.detail,a=n.name;o[a]=i,console.log(e(this," at pages\\applicationKeyUser\\applicationKeyUser.vue:156"))},sendMsgCode:function(){},chooseTypeCd:function(){this.showTypeCd=!0},onConfirm:function(t){console.log(e("onConfirm",t," at pages\\applicationKeyUser\\applicationKeyUser.vue:167"));var o="";o=0==t.detail.index?"10004":1==t.detail.index?"10005":"10006",this.showTypeCd=!1,this.typeCd=o,this.typeCdName=t.detail.value},onChange:function(t){console.log(e(t," at pages\\applicationKeyUser\\applicationKeyUser.vue:183"))},onCancel:function(e){this.showTypeCd=!1},chooseSex:function(){this.showSex=!0},onSexConfirm:function(t){console.log(e("onConfirm",t," at pages\\applicationKeyUser\\applicationKeyUser.vue:192")),this.showSex=!1,this.sex=t.detail.value},onSexChange:function(t){console.log(e(t," at pages\\applicationKeyUser\\applicationKeyUser.vue:197"))},onSexCancel:function(e){this.showSex=!1},chooseExpiry:function(){this.showExpiry=!0},onExpiryConfirm:function(t){console.log(e("onConfirm",t," at pages\\applicationKeyUser\\applicationKeyUser.vue:206"));var o=null;o="一个月"==t.detail.value?i.date.formatTime(i.date.addMonth(new Date,1)):"半年"==t.detail.value?i.date.formatTime(i.date.addMonth(new Date,6)):i.date.formatTime(i.date.addYear(new Date,1)),this.showExpiry=!1,this.expiry=t.detail.value,this.endTime=o},onExpiryChange:function(t){console.log(e(t," at pages\\applicationKeyUser\\applicationKeyUser.vue:222"))},onExpiryCancel:function(e){this.showExpiry=!1},afterRead:function(t){var o=t.detail.file,n=this,i=this.photoList,s=void 0===i?[]:i;s.push(o),this.photoList=s,a.base64.urlTobase64(o.path).then(function(e){n.photos.push(e)}),console.log(e("data信息：",this," at pages\\applicationKeyUser\\applicationKeyUser.vue:244"))},removePhoto:function(t){console.log(e(t.detail.index," at pages\\applicationKeyUser\\applicationKeyUser.vue:248"));var o=[];this.photoList.forEach(function(e,n){n!=t.detail.index&&o.push(e)});var n=[];this.photos.forEach(function(e,o){o!=t.detail.index&&n.push(e)}),this.photos=n,this.photoList=o},saveApplicationKey:function(){var t={name:this.name,age:this.age,sex:"男"==this.sex?1:0,typeCd:this.typeCd,idCard:this.idCard,startTime:this.startTime,endTime:this.endTime,tel:this.tel,photos:[],msgCode:this.msgCode,communityId:this.communityId,machineIds:[],typeFlag:"1100102"},o=this.photos;o.forEach(function(e){t.photos.push({photo:e})});var i="";""==t.name&&(i="请填写名称"),null==t.age&&(i="请填写年龄"),""==t.sex&&(i="请选择性别"),""==t.typeCd&&(i="请选择身份"),""==t.idCard&&(i="请填写身份证"),null==t.startTime&&(i="请选择有效期"),null==t.endTime&&(i="请选择有效期"),""==t.tel&&(i="请选择填写手机号"),(null==t.photos||t.photos.length<2)&&(i="请选择证件照片"),""==t.msgCode&&(i="请填写验证码"),(null==this.locations||this.locations.length<1)&&(i="没有设备可申请钥匙"),""==i?(this.locations.forEach(function(e){t.machineIds.push({machineId:e.machineId})}),console.log(e(t," at pages\\applicationKeyUser\\applicationKeyUser.vue:349")),n.request({url:s.url.applyApplicationKey,header:n.getHeaders(),method:"POST",data:t,success:function(t){console.log(e("请求返回信息：",t," at pages\\applicationKeyUser\\applicationKeyUser.vue:357")),200!=t.statusCode?wx.showToast({title:"服务器异常了",icon:"none",duration:2e3}):wx.redirectTo({url:"/pages/applicationKeyProgress/applicationKeyProgress"})},fail:function(e){wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})):wx.showToast({title:i,icon:"none",duration:2e3})}}};t.default=c}).call(this,o("0de9")["default"])},ed61:function(e,t,o){"use strict";var n=o("4e45"),i=o.n(n);i.a}},[["b3b8","common/runtime","common/vendor"]]]);