(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"07f7":function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},1078:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},"1ddb":function(t,e,n){},"25cd":function(t,e,n){"use strict";n.r(e);var o=n("e22e"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},"2f71":function(t,e,n){"use strict";(function(t){n("a8a6"),n("921b");o(n("66fd"));var e=o(n("4b4b"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"346a":function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{showPassword:!1,second:0,isRunCode:!1}},props:{type:String,value:String,placeholder:String,maxlength:{type:[Number,String],default:20},isShowPass:{type:[Boolean,String],default:!1},isShowCode:{type:[Boolean,String],default:!1},codeText:{type:String,default:"获取验证码"},setTime:{type:[Number,String],default:60}},model:{prop:"value",event:"input"},mounted:function(){var t=this;this,this.$on("runCode",(function(e){t.runCode(e)})),clearInterval(o)},methods:{showPass:function(){this.showPassword=!this.showPassword},onInput:function(t){this.$emit("input",t.target.value)},setCode:function(){if(this.isRunCode)return!1;this.$emit("setCode")},runCode:function(t){if("0"==String(t))return this.second=0,clearInterval(o),this.isRunCode=!1,!1;if(this.isRunCode)return!1;this.isRunCode=!0,this.second=this._setTime;var e=this;o=setInterval((function(){e.second--,0==e.second&&(e.isRunCode=!1,clearInterval(o))}),1e3)}},computed:{_type:function(){var t=this.type;return"password"==t?"text":t},_isShowPass:function(){return"false"!==String(this.isShowPass)},_isShowCode:function(){return"false"!==String(this.isShowCode)},_setTime:function(){var t=Number(this.setTime);return t>0?t:60},getVerCodeSecond:function(){return this.second<=0?this.codeText:this.second<10?"0"+this.second:this.second}}};e.default=i},4960:function(t,e,n){"use strict";n.r(e);var o=n("07f7"),i=n("b36e");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("6d27");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},"4b4b":function(t,e,n){"use strict";n.r(e);var o=n("a22f"),i=n("9e5a");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("c23c");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},6276:function(t,e,n){},"6d27":function(t,e,n){"use strict";var o=n("1ddb"),i=n.n(o);i.a},"6fdf":function(t,e,n){"use strict";n.r(e);var o=n("1078"),i=n("25cd");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("bc8c");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=s.exports},8853:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o(n("4960")),o(n("6fdf"));function o(t){return t&&t.__esModule?t:{default:t}}var i=n("567f"),r=i.constant,a=(i.factory,{data:function(){return{logoUrl:"",username:"test001",password:"wuxw2015",appId:""}},mounted:function(){this,this.logoUrl=r.url.baseUrl+"logo.png";var e=t.getAccountInfoSync();this.appId=e.miniProgram.appId},methods:{bindInput:function(t){console.log("数据监听",t);var e=this,n=t.currentTarget.dataset,o=t.detail,i=n.name;e[i]=o,console.log(this)},_doLogin:function(){var t=this;wx.login({success:function(e){e.code?t._doMyLogin(e):t.coreUtil.showInfo("微信登录失败")},fail:function(e){t.coreUtil.showInfo("微信登录失败"),console.log(e)}})},_doMyLogin:function(e){if(""!=this.username)if(""!=this.password){var n=e.hasOwnProperty("code")?e.code:"",o={username:this.username,password:this.password,code:n,appId:this.appId};t.showLoading({title:"加载中",mask:!0}),t.request({url:r.url.loginOwnerUrl,header:i.getHeaders(),method:"POST",data:JSON.stringify(o),success:function(e){if(t.hideLoading(),console.log("登录返回信息",e),200==e.statusCode){var n=e.data,o=n.owner;wx.setStorageSync(r.mapping.OWNER_INFO,o),wx.setStorageSync(r.mapping.USER_INFO,JSON.stringify(o));var i={communityId:o.communityId,communityName:o.communityName};wx.setStorageSync(r.mapping.CURRENT_COMMUNITY_INFO,i);var a=new Date,u=a.getFullYear(),s=a.getMonth(),c=a.getDate(),d=a.getHours()+1,f=a.getMinutes(),l=a.getSeconds();console.log("获取过去时间",u,s,c,d,f,l);var g=new Date(u,s,c,d,f,l);console.log("afterOneHourDate",g),wx.setStorageSync(r.mapping.LOGIN_FLAG,{sessionKey:o.userId,expireTime:g.getTime()}),wx.setStorageSync(r.mapping.TOKEN,n.token),wx.switchTab({url:"/pages/index/index"})}else t.showToast({icon:"none",title:e.data})},fail:function(e){console.log(e),t.hideLoading(),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}})}else wx.showToast({title:"请填写密码",icon:"none"});else wx.showToast({title:"请填写用户名",icon:"none"})},_doRegister:function(){t.navigateTo({url:"/pages/register/register"})}}});e.default=a}).call(this,n("543d")["default"])},"9e5a":function(t,e,n){"use strict";n.r(e);var o=n("8853"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},a22f:function(t,e,n){"use strict";var o,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o}))},b36e:function(t,e,n){"use strict";n.r(e);var o=n("346a"),i=n.n(o);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},bc8c:function(t,e,n){"use strict";var o=n("d19a"),i=n.n(o);i.a},c23c:function(t,e,n){"use strict";var o=n("6276"),i=n.n(o);i.a},d19a:function(t,e,n){},e22e:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={props:{text:String,rotate:{type:[Boolean,String],default:!1},bgColor:{type:String,default:"linear-gradient(to right, rgba(0,0,0,0.7), rgba(0,0,0,0.6))"},fontColor:{type:String,default:"#FFFFFF"}},computed:{_rotate:function(){return"false"!==String(this.rotate)}}};e.default=o}},[["2f71","common/runtime","common/vendor"]]]);