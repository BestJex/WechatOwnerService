(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/complaint/complaint"],{"1ff3":function(o,t,e){"use strict";e.r(t);var n=e("43ee"),i=e("fdb1");for(var a in i)"default"!==a&&function(o){e.d(t,o,(function(){return i[o]}))}(a);e("ac32");var s,c=e("f0c5"),u=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);t["default"]=u.exports},"43ee":function(o,t,e){"use strict";var n,i=function(){var o=this,t=o.$createElement;o._self._c},a=[];e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return n}))},5212:function(o,t,e){},"581b":function(o,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e("567f"),i=n.constant,a=n.factory,s={data:function(){return{imgList:[],imageIndex:0,index:null,complaintIndex:0,roomCloums:[],roomIdArr:[],roomName:"请选择",roomId:"",roomShow:!1,columns:["投诉","建议"],typeCds:["809001","809002"],typeName:"请选择",typeCd:"",typeShow:!1,photoList:[],tel:"",context:"",complaintName:"",userId:"",storeId:"",photos:[],communityId:""}},onLoad:function(o){var t=this;n.getRooms().then((function(o){console.log(o);var e=o.data.rooms,n=[],i=[];e.map((function(o){n.push(o.floorNum+"号楼"+o.unitNum+"单元"+o.roomNum+"室"),i.push(o.roomId)})),console.log(t),t.roomCloums=n,t.roomIdArr=i,t.userId=o.data.owner.appUserId,t.communityId=o.data.owner.communityId}))},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{ChooseImage:function(o){var t=this;wx.chooseImage({count:4,sizeType:["original","compressed"],sourceType:["album"],success:function(o){console.log(o),t.$data.imgList.length?t.$data.imgList.push(o.tempFilePaths[0]):t.$data.imgList=o.tempFilePaths}})},deleteImage:function(o){console.log(o);var t=this.$data.imgList;t.splice(o,1)},_changeComplaint:function(o){this.typeName=this.columns[o.detail.value],this.typeCd=this.typeCds[o.detail.value]},_changeRoom:function(o){this.roomName=this.roomCloums[o.detail.value],this.roomId=this.roomIdArr[o.detail.value]},bindInput:function(o){switch(console.log("数据监听",o),o.target.id){case"complaintName":this.$data.complaintName=o.detail.value;break;case"tel":this.$data.tel=o.detail.value;break;case"context":this.$data.context=o.detail.value;break}console.log(this)},bindOwner:function(o){var t={typeCd:this.typeCd,complaintName:this.complaintName,tel:this.tel,roomId:this.roomId,photos:[],context:this.context,userId:this.userId,communityId:this.communityId},e=this.photos;e.forEach((function(o){t.photos.push({photo:o})})),console.log(t,3333333333333);var a="";""==t.typeCd?a="请选择投诉类型":""==t.complaintName?a="请填写投诉人":""==t.tel?a="请填写手机号":""==t.context&&(a="请填写投诉内容"),""!=a?wx.showToast({title:a,icon:"none",duration:2e3}):(console.log("提交数据",t),n.request({url:i.url.saveComplaint,header:n.getHeaders(),method:"POST",data:t,success:function(o){200!=o.statusCode?wx.showToast({title:"服务器异常了",icon:"none",duration:2e3}):wx.redirectTo({url:"/pages/complaintList/complaintList"})},fail:function(o){console.log(o),wx.showToast({title:"服务器异常了",icon:"none",duration:2e3})}}))},onChange:function(o){console.log(o)},onTypeConfirm:function(o){console.log("onConfirm",o),this.typeName=o.detail.value,this.typeCd=o.detail.index?"809001":"809002",this.typeShow=!1},onTypeCancel:function(o){this.typeShow=!1},chooseType:function(o){this.typeShow=!0},onRoomConfirm:function(o){console.log("onConfirm",o),this.roomName=o.detail.value,this.roomId=this.roomIdArr[o.detail.index],this.roomShow=!1},onRoomCancel:function(o){this.roomShow=!1},chooseRoom:function(o){this.roomShow=!0},afterRead:function(o){var t=o.detail.file,e=this,n=this.photoList,i=void 0===n?[]:n;i.push(t),this.photoList=i,a.base64.urlTobase64(t.path).then((function(o){e.photos.push(o)})),console.log("data信息：",this)},removePhoto:function(o){console.log(o.detail.index);var t=[];this.photoList.forEach((function(e,n){n!=o.detail.index&&t.push(e)}));var e=[];this.photos.forEach((function(t,n){n!=o.detail.index&&e.push(t)})),this.photos=e,this.photoList=t}}};t.default=s},ac32:function(o,t,e){"use strict";var n=e("5212"),i=e.n(n);i.a},e64c:function(o,t,e){"use strict";(function(o){e("a8a6"),e("921b");n(e("66fd"));var t=n(e("1ff3"));function n(o){return o&&o.__esModule?o:{default:o}}o(t.default)}).call(this,e("543d")["createPage"])},fdb1:function(o,t,e){"use strict";e.r(t);var n=e("581b"),i=e.n(n);for(var a in n)"default"!==a&&function(o){e.d(t,o,(function(){return n[o]}))}(a);t["default"]=i.a}},[["e64c","common/runtime","common/vendor"]]]);